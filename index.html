<!DOCTYPE html>
<html lang="en" xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
	<meta charset="UTF-8">
	<title>Tables de multiplication</title>
	<!-- Compiled and minified CSS -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/css/materialize.min.css">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link rel="stylesheet" href="css/app.css" />
	<link href='http://fonts.googleapis.com/css?family=Lato:400,700' rel='stylesheet' type='text/css'>

</head>
<body>

<!-- VUE PRINCIPALE -->
<div id="app" class="container">
	<nav>
		<div class="nav-wrapper">
			<router-link to="/" class="brand-logo">
				Tables de multiplication
			</router-link>
			<ul class="right hide-on-med-and-down">
				<li>
					<router-link to="/" class="waves-effect waves-light btn">
						Accueil <i class="material-icons left">home</i>
					</router-link>
				</li>
				<li>
					<router-link to="/apprentissage" class="waves-effect waves-light btn">
						Apprentissage <i class="material-icons left">mode_edit</i>
					</router-link>
				</li>
				<li>
					<router-link to="/evaluation" class="waves-effect waves-light btn">
						Evaluation <i class="material-icons left">grade</i>
					</router-link>
				</li>
			</ul>
		</div>
	</nav>
	<div id="main">
		<router-view></router-view>
	</div>
	<footer class="page-footer">
		<div class="footer-copyright">
			<div class="container">
				© 2017 DNR2I
				<router-link to="/" class="grey-text text-lighten-4 right">Retour à l'accueil</router-link>
			</div>
		</div>
	</footer>
</div>
<script id="home" type="text/x-template">
	<article>
		<h1 class="header center">Choisis ton mode de jeu</h1>
		<template v-if="message">
			<p>{{ message }}</p>
		</template>
		<div class="row">
			<div class="col s6 m6">
				<div class="card">
					<div class="card-image">
						<img src="images/book.png">
					</div>
					<div class="card-content">
						<p>Révise tes tables de multiplication avec le mode apprentissage !</p>
					</div>
					<div class="card-action">
						<router-link :to="{ name: 'learning' }">Commencez l'entraînement</router-link>
					</div>
				</div>
			</div>
			<div class="col s6 m6">
				<div class="card">
					<div class="card-image">
						<img src="images/owl.png">
					</div>
					<div class="card-content">
						<p>Test tes connaissances avec le mode évaluation !</p>
					</div>
					<div class="card-action">
						<router-link :to="{ name: 'evaluation' }">Commencez l'évaluation</router-link>
					</div>
				</div>
			</div>
		</div>

		<template v-if="storageExist">
			<h2>Sauvegarder ma partie:</h2>
			<p>Ta progression est sauvegardée dans ton ordinateur mais si tu veux un fichier de sauvegarde pour jouer sur un autre ordinateur cliques ici: <a :href="saveUri" download="timesTableSavegame.save">télécharger ma sauvegarde</a></p>
		</template>
		<template v-else>
			<h2>Restaurer ma partie:</h2>
			<p>Nous n'avons pas de partie enregistré sur cet ordinateur! Si tu es nouveau c'est normal, tu pourras en télécharger une après avoir joué. Si tu as un fichier de sauvegarde, tu peux l'importer ici:</p>
			<input type="file" id="input" @change="importSave($event)">
		</template>
	</article>
	
</script>
<script id="learning" type="text/x-template">
	<section>
		<article id="content-learning">
			<h1 class="header center">Mode apprentissage</h1>
			<div class="row">
					<div class="card-content" deep-purple lighten-4>
						<p>Grâce au mode apprentissage, tu peux choisir quelle table de multiplication réviser !</p>
						<p>Choisis ta table de multiplication</p>
					</div>
					<div class="card-tabs">
						<ul class="tabs tabs-fixed-width">
							<li v-for="n in 9" class="tab">
								<button v-if="table == n" class="btn red">{{ n }}</button>
                                                        	<button v-else v-on:click="play(n)" class="btn">{{ n }}</button>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</article>

		<template v-if="table != 0 && round < 11">
			<article class="content-operation">
				<h2 class="header center">Table de {{ table }}</h2>
				<p class="text-tour">Opération {{round}} sur 10</p>
				<h3 class="center">{{ table }} x {{ operations[round-1].multiplier }} =</h3>
				<p>Choisi la bonne réponse:</p>
				<div class="answers">
				<span v-for="choice in operations[round-1].choices">
					<button v-if="userChoices.indexOf(choice) >= 0" class="btn red">{{ choice }}</button>
					<button v-else class="btn" v-on:click="playRound(round, choice)">{{ choice }}</button>
				</span>
				</div>
			</article>
		</template>

		<template v-if="round == 11">
			{{ end() }}
			<article>
				<h1 class="header center">Résultat de l'entrainement sur la table de {{ table }}:</h1>
				<table class="bordered highlight table-score">
					<thead>
					<tr>
						<th data-field="operation">Opération</th>
						<th data-field="result">Résultat</th>
						<th deta-field="errors">Nombre d'erreurs</th>
						<th deta-field="answers">Réponses données</th>
						<th data-field="timer">Temps</th>
					</tr>
					</thead>
					<tbody>
					<tr v-for="operation in operations">
						<td>{{ table }} x {{ operation.multiplier }}</td>
						<td>{{ operation.result }}</td>
						<td>
							<span v-if="operation.error == 0" class="no-mistakes">Pas d'erreurs</span>
							<span v-else class="mistakes">{{ operation.error }}</span>
						</td>
						<td><span v-for="userChoice in operation.userChoices">{{ userChoice }} </span></td>
						<td>{{ operation.time }}</td>
					</tr>
					</tbody>
				</table>

			</article>
		</template>
	</section>
</script>
<script id="evaluation" type="text/x-template">
			<div v-if="index < operations.length">
				<h1 class="header center">Page d'évaluation</h1>
				<article class="content-operation">
				<p class="text-tour">Opération {{ index+1 }} sur 10</p>
				<h3 class="center">{{ currentOperation.multiplier1 }} x {{ currentOperation.multiplier2 }} =</h3>
				<p>Choisi la bonne réponse:</p>
				<div class="answers">
				<span v-for="choice in currentOperation.choices">
					<button v-if="operations[index].userChoices.indexOf(choice) >= 0" class="btn red">{{ choice }}</button>
					<button v-else class="btn" v-on:click="checkResult(choice,currentOperation)">{{ choice }}</button>
				</span>
				</div>
				</article>
			</div>
			<div v-else>
				<h1 class="header center">Résultats de l'évaluation</h1>
				<table class="bordered highlight table-score">
					<thead>
					<tr>
						<th data-field="operation">Opération</th>
						<th data-field="result">Résultat</th>
						<th data-field="errors">Nombre d'erreurs</th>
						<th deta-field="answers">Réponses données</th>
						<th data-field="timer">Temps</th>
					</tr>
					</thead>
					<tbody>
					<tr v-for="operation in operations">
						<td>{{ operation.multiplier1 }} x {{ operation.multiplier2 }}</td>
						<td>{{ operation.result }}</td>
						<td>
							<span v-if="operation.errors == 0" class="no-mistakes">Pas d'erreurs</span>
							<span v-else class="mistakes">{{ operation.errors }}</span>
						</td>
						<td><span v-for="userChoice in operation.userChoices">{{ userChoice }} </span></td>
						<td>{{ operation.time }}</td>
					</tr>
					</tbody>
				</table>
			</div>
		</article>
		</template>
	</section>
</script>

<script src="https://unpkg.com/vue/dist/vue.js"></script>
<script src="js/lib/jquery/dist/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/js/materialize.min.js"></script>
<script src="js/lib/vue-router/dist/vue-router.js"></script>
<script src="https://cdn.jsdelivr.net/vue.resource/1.0.3/vue-resource.min.js"></script>

<script src="js/global.js"></script>
<script src="js/store.js"></script>
<script src="js/home.js"></script>
<script src="js/evaluate.js"></script>
<script src="js/train.js"></script>
<script src="js/router.js"></script>
</body>
</html>
